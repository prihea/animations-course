<script defer src="https://cdn.jsdelivr.net/npm/gsap@3.12.5/dist/gsap.min.js"></script>
<script defer src="https://cdn.jsdelivr.net/npm/gsap@3.12.5/dist/ScrollTrigger.min.js"></script>


<script>

  $(function () {
    gsap.registerPlugin(ScrollTrigger);


    const items = document.querySelectorAll('[data-lookbook-item]');
    const animationDuration = 1;

    items.forEach((el, index) => {
      const image = el.querySelector('.lookbook_image');
      const caption = el.querySelector('.lookbook_caption');

      if (index % 2 !== 0) {
        gsap.set(image, {
          left: 'auto',
          right: '0%'
        })
      } else {
        gsap.set(image, {
          left: '0%',
          right: 'auto'
        })
      }

      gsap.timeline({
        defaults: {
          duration: animationDuration
        },
        scrollTrigger: {
          trigger: el,
          start: 'top 80%',
          end: '+=70%',
          once: true,
          scrub: animationDuration
        }
      })
        .from(image, {
          scale: 2,
          width: '0%'
        })
        .from(caption, {
          opacity: 0,
          scale: 0.5,
          y: 16
        }, '<70%');

    });
  });

</script>