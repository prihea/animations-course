(function(e,t){"use strict";"function"==typeof define&&define.amd?define(["jquery"],function(n){return t(n,e,e.document)}):"object"==typeof module&&module.exports?module.exports=t(require("jquery"),e,e.document):t(jQuery,e,e.document)})("undefined"!=typeof window?window:this,function(e,t,n,o){"use strict";function r(){return t.innerHeight+j.offset}function s(n,o,s,i){if(w===n&&(s=!1),!0===D)return!0;if(m[n]){if(M=!1,!0===N&&(N=!1,j.afterRender()),s&&"function"==typeof j.before&&!1===j.before(n,g))return!0;if(S=1,O=n?p[n]:0,!1===N&&w>n&&!1===i&&v[n]&&(l=r(),S=parseInt(g[n].outerHeight()/l),O=parseInt(p[n])+(g[n].outerHeight()-l)),j.updateHash&&j.sectionName&&(!0!==N||0!==n))if(history.pushState)try{history.replaceState(null,null,m[n])}catch(e){t.console&&console.warn("Scrollify warning: Page must be hosted to manipulate the hash value.")}else t.location.hash=m[n];if(w=n,o)e(j.target).stop().scrollTop(O),s&&j.after(n,g);else{if(x=!0,e().velocity?e(j.target).stop().velocity("scroll",{duration:j.scrollSpeed,easing:j.easing,offset:O,mobileHA:!1}):e(j.target).stop().animate({scrollTop:O},j.scrollSpeed,j.easing),t.location.hash.length&&j.sectionName&&t.console)try{e(t.location.hash).length&&console.warn("Scrollify warning: ID matches hash value - this will cause the page to anchor.")}catch(e){}e(j.target).promise().done(function(){x=!1,N=!1,s&&j.after(n,g)})}}}function i(e){function t(t){for(var n=0,o=e.slice(Math.max(e.length-t,1)),r=0;r<o.length;r++)n+=o[r];return Math.ceil(n/t)}var n=t(10),o=t(70);return n>=o}function a(e,t){for(var n=m.length;n>=0;n--)"string"==typeof e?m[n]===e&&(y=n,s(n,t,!0,!0)):n===e&&(y=n,s(n,t,!0,!0))}var c,u,l,h,f,d,p=[],m=[],g=[],v=[],y=0,w=0,S=1,E=!1,H=e(t),b=H.scrollTop(),M=!1,x=!1,T=!1,D=!1,I=[],L=(new Date).getTime(),N=!0,k=!1,O=0,z="onwheel"in n?"wheel":n.onmousewheel!==o?"mousewheel":"DOMMouseScroll",R={passive:!1},j={section:".section",sectionName:"section-name",interstitialSection:"",easing:"easeOutExpo",scrollSpeed:1100,offset:0,scrollbars:!0,target:"html,body",standardScrollElements:!1,setHeights:!0,overflowScroll:!0,updateHash:!0,touchScroll:!0,before:function(){},after:function(){},afterResize:function(){},afterRender:function(){}},C=function(o){function a(t){e().velocity?e(j.target).stop().velocity("scroll",{duration:j.scrollSpeed,easing:j.easing,offset:t,mobileHA:!1}):e(j.target).stop().animate({scrollTop:t},j.scrollSpeed,j.easing)}function w(t){t&&(b=H.scrollTop());var n=j.section;v=[],j.interstitialSection.length&&(n+=","+j.interstitialSection),!1===j.scrollbars&&(j.overflowScroll=!1),l=r(),e(n).each(function(t){var n=e(this);j.setHeights?n.is(j.interstitialSection)?v[t]=!1:n.css("height","auto").outerHeight()<l||"hidden"===n.css("overflow")?(n.css({height:l}),v[t]=!1):(n.css({height:n.outerHeight()}),j.overflowScroll?v[t]=!0:v[t]=!1):n.outerHeight()<l||!1===j.overflowScroll?v[t]=!1:v[t]=!0}),t&&H.scrollTop(b)}function N(n,o){var r=j.section;j.interstitialSection.length&&(r+=","+j.interstitialSection),p=[],m=[],g=[],e(r).each(function(n){var o=e(this);p[n]=n>0?parseInt(o.offset().top)+j.offset:parseInt(o.offset().top),j.sectionName&&o.data(j.sectionName)?m[n]="#"+o.data(j.sectionName).toString().replace(/ /g,"-"):!1===o.is(j.interstitialSection)?m[n]="#"+(n+1):(m[n]="#",n===e(r).length-1&&n>1&&(p[n]=p[n-1]+(parseInt(e(e(r)[n-1]).outerHeight())-parseInt(e(t).height()))+parseInt(o.outerHeight()))),g[n]=o;try{e(m[n]).length&&t.console&&console.warn("Scrollify warning: Section names can't match IDs - this will cause the browser to anchor.")}catch(e){}t.location.hash===m[n]&&(y=n,E=!0)}),!0===n&&s(y,!1,!1,!1)}function O(){return!v[y]||(b=H.scrollTop(),!(b>parseInt(p[y])))}function C(){return!v[y]||(b=H.scrollTop(),l=r(),!(b<parseInt(p[y])+(g[y].outerHeight()-l)-28))}k=!0,e.easing.easeOutExpo=function(e,t,n,o,r){return t==r?n+o:o*(1-Math.pow(2,-10*t/r))+n},h={handleMousedown:function(){if(!0===D)return!0;M=!1,T=!1},handleMouseup:function(){if(!0===D)return!0;M=!0,T&&h.calculateNearest(!1,!0)},handleScroll:function(){if(!0===D)return!0;c&&clearTimeout(c),c=setTimeout(function(){if(T=!0,!1===M)return!1;M=!1,h.calculateNearest(!1,!0)},200)},calculateNearest:function(e,t){b=H.scrollTop();for(var n,o=1,r=p.length,i=0,a=Math.abs(p[0]-b);o<r;o++)n=Math.abs(p[o]-b),n<a&&(a=n,i=o);(C()&&i>y||O())&&(y=i,s(i,e,t,!1))},wheelHandler:function(n){if(!0===D)return!0;if(j.standardScrollElements&&(e(n.target).is(j.standardScrollElements)||e(n.target).closest(j.standardScrollElements).length))return!0;v[y]||n.preventDefault();var o,r=(new Date).getTime();n=n||t.event,o=n.originalEvent?n.originalEvent.wheelDelta||-n.originalEvent.deltaY||-n.originalEvent.detail:n.wheelDelta||-n.deltaY||-n.detail;var a=Math.max(-1,Math.min(1,o));if(I.length>149&&I.shift(),I.push(Math.abs(o)),r-L>200&&(I=[]),L=r,x)return n.preventDefault(),!1;if(a<0){if(y<p.length-1&&C()){if(!i(I))return!1;n.preventDefault(),y++,x=!0,s(y,!1,!0,!1)}}else if(a>0&&y>0&&O()){if(!i(I))return!1;n.preventDefault(),y--,x=!0,s(y,!1,!0,!1)}},keyHandler:function(t){return!0===D||!1===n.activeElement.readOnly||(!(!j.standardScrollElements||!e(t.target).is(j.standardScrollElements)&&!e(t.target).closest(j.standardScrollElements).length)||!0!==x&&void(38==t.keyCode||33==t.keyCode?y>0&&O()&&(t.preventDefault(),y--,s(y,!1,!0,!1)):40!=t.keyCode&&34!=t.keyCode||y<p.length-1&&C()&&(t.preventDefault(),y++,s(y,!1,!0,!1))))},init:function(){j.scrollbars?(H.on("mousedown",h.handleMousedown),H.on("mouseup",h.handleMouseup),H.on("scroll",h.handleScroll)):e("body").css({overflow:"hidden"}),t.addEventListener(z,h.wheelHandler,{passive:!1}),H.on("keydown",h.keyHandler)}},f={touches:{touchstart:{y:-1,x:-1},touchmove:{y:-1,x:-1},touchend:!1,direction:"undetermined"},options:{distance:30,timeGap:800,timeStamp:(new Date).getTime()},touchHandler:function(t){if(!0===D)return!0;if(j.standardScrollElements&&(e(t.target).is(j.standardScrollElements)||e(t.target).closest(j.standardScrollElements).length))return!0;var n;if(void 0!==t&&void 0!==t.touches)switch(n=t.touches[0],t.type){case"touchstart":f.touches.touchstart.y=n.pageY,f.touches.touchmove.y=-1,f.touches.touchstart.x=n.pageX,f.touches.touchmove.x=-1,f.options.timeStamp=(new Date).getTime(),f.touches.touchend=!1;case"touchmove":f.touches.touchmove.y=n.pageY,f.touches.touchmove.x=n.pageX,f.touches.touchstart.y!==f.touches.touchmove.y&&Math.abs(f.touches.touchstart.y-f.touches.touchmove.y)>Math.abs(f.touches.touchstart.x-f.touches.touchmove.x)&&(t.preventDefault(),f.touches.direction="y",f.options.timeStamp+f.options.timeGap<(new Date).getTime()&&0==f.touches.touchend&&(f.touches.touchend=!0,f.touches.touchstart.y>-1&&Math.abs(f.touches.touchmove.y-f.touches.touchstart.y)>f.options.distance&&(f.touches.touchstart.y<f.touches.touchmove.y?f.up():f.down())));break;case"touchend":!1===f.touches[t.type]&&(f.touches[t.type]=!0,f.touches.touchstart.y>-1&&f.touches.touchmove.y>-1&&"y"===f.touches.direction&&(Math.abs(f.touches.touchmove.y-f.touches.touchstart.y)>f.options.distance&&(f.touches.touchstart.y<f.touches.touchmove.y?f.up():f.down()),f.touches.touchstart.y=-1,f.touches.touchstart.x=-1,f.touches.direction="undetermined"))}},down:function(){y<p.length&&(C()&&y<p.length-1?(y++,s(y,!1,!0,!1)):(l=r(),Math.floor(g[y].height()/l)>S?(a(parseInt(p[y])+l*S),S+=1):a(parseInt(p[y])+(g[y].outerHeight()-l))))},up:function(){y>=0&&(O()&&y>0?(y--,s(y,!1,!0,!1)):S>2?(l=r(),S-=1,a(parseInt(p[y])+l*S)):(S=1,a(parseInt(p[y]))))},init:function(){n.addEventListener&&j.touchScroll&&(n.addEventListener("touchstart",f.touchHandler,R),n.addEventListener("touchmove",f.touchHandler,R),n.addEventListener("touchend",f.touchHandler,R))}},d={refresh:function(e,t){clearTimeout(u),u=setTimeout(function(){w(!0),N(t,!1),e&&j.afterResize()},400)},handleUpdate:function(){d.refresh(!1,!1)},handleResize:function(){d.refresh(!0,!1)},handleOrientation:function(){d.refresh(!0,!0)}},j=e.extend(j,o),w(!1),N(!1,!0),!0===E?s(y,!1,!0,!0):setTimeout(function(){h.calculateNearest(!0,!1)},200),p.length&&(h.init(),f.init(),H.on("resize",d.handleResize),n.addEventListener&&t.addEventListener("orientationchange",d.handleOrientation,!1))};return C.move=function(t){if(t===o)return!1;"number"!=typeof t&&t.originalEvent&&(t=e(this).attr("href")),a(t,!1)},C.instantMove=function(e){if(e===o)return!1;a(e,!0)},C.next=function(){y<m.length&&(y+=1,s(y,!1,!0,!0))},C.previous=function(){y>0&&(y-=1,s(y,!1,!0,!0))},C.instantNext=function(){y<m.length&&(y+=1,s(y,!0,!0,!0))},C.instantPrevious=function(){y>0&&(y-=1,s(y,!0,!0,!0))},C.destroy=function(){if(!k)return!1;j.setHeights&&e(j.section).each(function(){e(this).css("height","auto")}),H.off("resize",d.handleResize),j.scrollbars&&(H.off("mousedown",h.handleMousedown),H.off("mouseup",h.handleMouseup),H.off("scroll",h.handleScroll)),t.removeEventListener(z,h.wheelHandler),H.off("keydown",h.keyHandler),n.addEventListener&&j.touchScroll&&(n.removeEventListener("touchstart",f.touchHandler,R),n.removeEventListener("touchmove",f.touchHandler,R),n.removeEventListener("touchend",f.touchHandler,R)),p=[],m=[],g=[],v=[],N=!0,k=!1},C.update=function(){if(!k)return!1;d.handleUpdate()},C.current=function(){return g[y]},C.currentIndex=function(){return y},C.disable=function(){D=!0},C.enable=function(){D=!1,k&&h.calculateNearest(!1,!1)},C.isDisabled=function(){return D},C.setOptions=function(n){if(!k)return!1;"object"==typeof n?(j=e.extend(j,n),d.handleUpdate()):t.console&&console.warn("Scrollify warning: setOptions expects an object.")},e.scrollify=C,C});